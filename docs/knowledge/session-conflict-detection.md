# ã‚»ãƒƒã‚·ãƒ§ãƒ³ç«¶åˆæ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ (å‚åŠ äºˆå®šæ©Ÿèƒ½)

## æ¦‚è¦

å‚åŠ äºˆå®šã®ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã§ã€é¸æŠæ¸ˆã¿ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¨æ™‚é–“ãŒé‡ãªã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆé¸æŠä¸å¯ï¼‰ã«ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã€‚

## å®Ÿè£…ç®‡æ‰€

`public/app.js` â€” `sessionConflicts(checked, target)` é–¢æ•°

## æ­£ã—ã„ç«¶åˆåˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç¬¬4ä¸–ä»£ãƒ»ç¾è¡Œï¼‰

### åŸºæœ¬æ–¹é‡

**ã€Œtarget ã¨ checked ã®æ™‚é–“å¸¯ãŒ1åˆ†ã§ã‚‚é‡ãªã‚‹å ´åˆã¯ãƒ–ãƒ­ãƒƒã‚¯ã€**ï¼ˆæ¨™æº–çš„ãªåŒºé–“é‡è¤‡åˆ¤å®šï¼‰

```javascript
function sessionConflicts(checked, target) {
  const targetStart = timeToMinutes(target.start);
  const targetEnd = timeToMinutes(target.end);
  const checkedStart = timeToMinutes(checked.start);
  const checkedEnd = timeToMinutes(checked.end);
  return targetStart < checkedEnd && checkedStart < targetEnd;
}
```

åˆ¤å®šå¼: `target.start < checked.end AND checked.start < target.end`

### åˆ¤å®šä¾‹

| checkedï¼ˆé¸æŠæ¸ˆã¿ï¼‰ | targetï¼ˆå¯¾è±¡ï¼‰ | çµæœ | ç†ç”± |
|---|---|---|---|
| 11:00â€“11:20 | 11:00â€“11:50 | ãƒ–ãƒ­ãƒƒã‚¯ âœ— | 11:00ã€œ11:20 ãŒé‡è¤‡ |
| 11:30â€“11:50 | 11:00â€“11:50 | ãƒ–ãƒ­ãƒƒã‚¯ âœ— | 11:30ã€œ11:50 ãŒé‡è¤‡ |
| 11:00â€“11:50 | 11:30â€“11:50 | ãƒ–ãƒ­ãƒƒã‚¯ âœ— | 11:30ã€œ11:50 ãŒé‡è¤‡ |
| 11:00â€“11:50 | 11:00â€“11:20 | ãƒ–ãƒ­ãƒƒã‚¯ âœ— | 11:00ã€œ11:20 ãŒé‡è¤‡ |
| 12:00â€“12:15 | 12:00â€“13:30 | ãƒ–ãƒ­ãƒƒã‚¯ âœ— | 12:00ã€œ12:15 ãŒé‡è¤‡ |
| 12:00â€“13:30 | 12:00â€“12:15 | ãƒ–ãƒ­ãƒƒã‚¯ âœ— | 12:00ã€œ12:15 ãŒé‡è¤‡ |
| 11:00â€“11:20 | 11:30â€“11:50 | è¨±å¯ âœ“ | æ™‚é–“å¸¯ãŒé€£ç¶šã™ã‚‹ãŒé‡è¤‡ãªã— |
| 11:00â€“11:20 | 11:20â€“11:40 | è¨±å¯ âœ“ | éš£æ¥ï¼ˆ11:20 == 11:20ï¼‰ã¯é‡è¤‡ãªã— |

### è¤‡æ•°é¸æŠæ™‚ã®é‡è¦ãªã‚±ãƒ¼ã‚¹ï¼ˆãƒã‚°ä¿®æ­£ã®ãã£ã‹ã‘ï¼‰

| checked1 | checked2 | target | çµæœ | æ—§æŒ™å‹• |
|---|---|---|---|---|
| 11:00â€“11:20 | 11:30â€“11:50 | 11:00â€“11:50 | ãƒ–ãƒ­ãƒƒã‚¯ âœ— | è¨±å¯ï¼ˆãƒã‚°ï¼‰|

â‘ (11:00-11:20) ã¨â‘¡(11:30-11:50) ã‚’é¸æŠæ¸ˆã¿ã®å ´åˆã€â‘¢(11:00-11:50) ã¯
ã„ãšã‚Œã‹ä¸€æ–¹ã¨é‡è¤‡ã™ã‚‹ãŸã‚ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹ã€‚

## ãƒã‚°å±¥æ­´

### ç¬¬3ä¸–ä»£ï¼ˆç›´å‰ã®å®Ÿè£…ã€ãƒã‚°ã‚ã‚Šï¼‰

```javascript
// target ãŒ checked ã«åŒ…å«ã•ã‚Œã‚‹å ´åˆã®ã¿ãƒ–ãƒ­ãƒƒã‚¯
return checkedStart <= targetStart && targetStart < checkedEnd && targetEnd <= checkedEnd;
```

**å•é¡Œ**: checked ãŒ target ã‚’å†…åŒ…ã™ã‚‹æ–¹å‘ã®ã¿æ¤œå‡ºã—ã€é€†æ–¹å‘ï¼ˆtarget ãŒ checked ã‚ˆã‚Šé•·ã„ï¼‰ã‚’è¦‹é€ƒã™ã€‚

| ã‚±ãƒ¼ã‚¹ | æ—§ãƒ­ã‚¸ãƒƒã‚¯ | æ­£ã—ã„æŒ™å‹• | å•é¡Œ |
|---|---|---|---|
| checked=11:00â€“11:20, target=11:00â€“11:50 | è¨±å¯ï¼ˆ11:50 > 11:20ï¼‰ | ãƒ–ãƒ­ãƒƒã‚¯ã™ã¹ã | **èª¤ã‚Šã§è¨±å¯** |
| checked=11:30â€“11:50, target=11:00â€“11:50 | è¨±å¯ï¼ˆ11:00 < 11:30ï¼‰ | ãƒ–ãƒ­ãƒƒã‚¯ã™ã¹ã | **èª¤ã‚Šã§è¨±å¯** |

**æ ¹æœ¬çš„ãªå•é¡Œ**: è¤‡æ•°ã®çŸ­ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆâ‘ â‘¡ï¼‰ãŒçµ„ã¿åˆã‚ã•ã£ã¦é•·ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆâ‘¢ï¼‰ã®
æ™‚é–“å¸¯ã‚’è¦†ã£ã¦ã„ã¦ã‚‚ã€å€‹ã€…ã® checked ãŒâ‘¢ã‚’åŒ…å«ã—ãªã„ãŸã‚ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œãªã‹ã£ãŸã€‚

### ç¬¬1ä¸–ä»£ï¼ˆèª¤ã‚Šï¼‰

```javascript
function sessionConflicts(checked, target) {
  if (!sessionsOverlap(checked, target)) return false;
  return timeToMinutes(checked.end) >= timeToMinutes(target.end);
}
```

### ç¬¬2ä¸–ä»£ï¼ˆé–‹å§‹æ™‚åˆ»ã®ã¿åˆ¤å®šã€éƒ¨åˆ†çš„ã«èª¤ã‚Šï¼‰

```javascript
return checkedStart <= targetStart && targetStart < checkedEnd;
```

**å•é¡Œ**: åŒã˜é–‹å§‹æ™‚åˆ»ã‹ã¤ target ãŒ checked ã‚ˆã‚Šé•·ã„å ´åˆã‚‚ãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã—ã¾ã†ã€‚

---

## timetable.json ã®é‡è¤‡ã‚¨ãƒ³ãƒˆãƒªãƒã‚°ï¼ˆãƒ‡ãƒ¼ã‚¿å“è³ªï¼‰

### ç™ºç”Ÿã—ãŸãƒã‚°

ãƒˆãƒ©ãƒƒã‚¯Aã® 13:20-14:10 ã‚¹ãƒ­ãƒƒãƒˆã«ã€å®Ÿã‚»ãƒƒã‚·ãƒ§ãƒ³ (id:15) ã¨é‡è¤‡ã™ã‚‹
ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚¨ãƒ³ãƒˆãƒªãŒæ®‹å­˜ã—ã€ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«ä¸Šã«è¦–è¦šçš„ã«é‡ãªã£ã¦è¡¨ç¤ºã•ã‚ŒãŸã€‚

```
id:15  track:A  13:20-14:10  ã€Œç”ŸæˆAIæ™‚ä»£ã®é–‹ç™ºã¨é‹ç”¨ã€  â† å®Ÿã‚»ãƒƒã‚·ãƒ§ãƒ³
id:16  track:A  13:40-13:50  ã€Œä¼‘æ†©ã€                    â† å‰Šé™¤ã™ã¹ããƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
id:17  track:A  13:50-14:10  ã€Œã‚»ãƒƒã‚·ãƒ§ãƒ³ã€              â† å‰Šé™¤ã™ã¹ããƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
```

### åŸå› 

ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼ãŒã‚»ãƒƒã‚·ãƒ§ãƒ³æ ã‚’ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã§åŸ‹ã‚ãŸå¾Œã€
å®Ÿã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒè¿½åŠ ã•ã‚ŒãŸéš›ã«å¤ã„ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãŒå‰Šé™¤ã•ã‚Œã¦ã„ãªã‹ã£ãŸã€‚

### è§£æ±ºç­–

é‡è¤‡ã™ã‚‹ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚¨ãƒ³ãƒˆãƒª (id:16, id:17) ã‚’ `timetable.json` ã‹ã‚‰å‰Šé™¤ã€‚

### å†ç™ºé˜²æ­¢

- `timetable.json` ã‚’æ›´æ–°ã™ã‚‹éš›ã¯ã€åŒä¸€ãƒˆãƒ©ãƒƒã‚¯ãƒ»æ™‚é–“å¸¯ã®é‡è¤‡ã‚¨ãƒ³ãƒˆãƒªãŒãªã„ã‹ç¢ºèªã™ã‚‹
- ç‰¹ã«ã€Œã‚¿ã‚¤ãƒˆãƒ«ãŒ `ã‚»ãƒƒã‚·ãƒ§ãƒ³` ã®ã‚¨ãƒ³ãƒˆãƒªã€ã¯ç¢ºå®šã‚»ãƒƒã‚·ãƒ§ãƒ³è¿½åŠ å¾Œã«å‰Šé™¤æ¼ã‚ŒãŒèµ·ãã‚„ã™ã„

---

## å‚åŠ äºˆå®šæ©Ÿèƒ½ã®æ‹¡å¼µï¼ˆ2026-02-11ï¼‰

### å¤‰æ›´å†…å®¹

**1. ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ãƒ»ã‚­ãƒ¼ãƒãƒ¼ãƒˆã‚’é¸æŠå¯èƒ½ã«**

`isNonSession` æ¡ä»¶ã‹ã‚‰ `"ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°"` ã¨ `"ã‚­ãƒ¼ãƒãƒ¼ãƒˆ"` ã‚’é™¤å¤–ã€‚
é¸æŠä¸å¯ã¨ã—ã¦æ®‹ã™ã®ã¯ã€Œå—ä»˜ã€ã€Œä¼‘æ†©ã€ã€Œä¼šå ´ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå¤‰æ›´ã€ã®ã¿ã€‚

```javascript
const isNonSession =
  !session.proposalUrl &&
  (session.title.includes("ä¼‘æ†©") ||
    session.title.includes("å—ä»˜") ||
    session.title.includes("ä¼šå ´ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå¤‰æ›´"));
```

**2. ã‚°ãƒ«ãƒ¼ãƒ—ã‚»ãƒƒã‚·ãƒ§ãƒ³é€£å‹•ï¼ˆã‚­ãƒ¼ãƒãƒ¼ãƒˆãƒ»æ‡‡è¦ªä¼šãƒ»ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°ï¼‰**

`isGroupSession()` ã‚’è¿½åŠ ã€‚ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹å¤‰æ›´æ™‚ã«åŒã‚¿ã‚¤ãƒˆãƒ«ã®å…¨ãƒˆãƒ©ãƒƒã‚¯ã‚’é€£å‹•ã•ã›ã‚‹ã€‚

```javascript
function isGroupSession(session) {
  return session.title.includes("ã‚­ãƒ¼ãƒãƒ¼ãƒˆ") || session.title.includes("æ‡‡è¦ªä¼š") || session.title.includes("ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°");
}
```

checkbox `change` ã‚¤ãƒ™ãƒ³ãƒˆå†…ã§ã€ã‚°ãƒ«ãƒ¼ãƒ—ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å ´åˆã¯
`timetableData.sessions.filter(s => s.title === session.title)` ã§å…„å¼Ÿã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å–å¾—ã—ã€
`pendingChecked` ã¨ DOM ã®ä¸¡æ–¹ã‚’æ›´æ–°ã™ã‚‹ã€‚

**3. ã‚¿ã‚°è¡¨ç¤ºä½ç½®ã®å¤‰æ›´**

ã‚»ãƒ«å†…ã®æç”»é †ã‚’ã€Œæ™‚é–“ â†’ ã‚¿ã‚¤ãƒˆãƒ« â†’ ç™»å£‡è€… â†’ ã‚¿ã‚°ã€ã‹ã‚‰
ã€Œæ™‚é–“ â†’ ã‚¿ã‚° â†’ ã‚¿ã‚¤ãƒˆãƒ« â†’ ç™»å£‡è€…ã€ã«å¤‰æ›´ã€‚

**4. ãƒ©ãƒ³ãƒã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ğŸ´ã‚¿ã‚°ã‚’è¿½åŠ **

`isLunchSession()` ã‚’è¿½åŠ ã€‚Track A-G ã® 12:00-12:15 / 12:20-12:35 ã« `lunch-tag` ã‚¯ãƒ©ã‚¹ã®
ã‚¿ã‚°ã‚’æœ€åˆã«è¡¨ç¤ºã€‚CSS ã§ã¯ `background-color: #e8a000`ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ç³»ï¼‰ã‚’è¨­å®šã€‚
